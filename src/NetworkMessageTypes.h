#pragma once
#include "Block.h"

#pragma pack(push, 1)
struct VerackMessage {
	uint8_t magic_bytes[4] = { 0xf9, 0xbe, 0xb4, 0xd9 };
	uint8_t command[12] = { 0x76, 0x65, 0x72, 0x61, 0x63, 0x6b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
	uint32_t size = 0;
	uint8_t checksum[4] = { 0x5d,0xf6,0xe0,0xe2 };
};
#pragma pack(pop)

#pragma pack(push, 1)
struct VersionMessage {
	uint8_t magic_bytes[4] = { 0xf9, 0xbe, 0xb4, 0xd9 };
	uint8_t command[12] = { 0x76, 0x65, 0x72, 0x73, 0x69, 0x6f, 0x6e, 0x00, 0x00, 0x00, 0x00, 0x00 };
	uint32_t size = 85;
	uint8_t checksum[4];
	uint32_t version = 70015;
	uint64_t services = 0;
	uint64_t time;
	uint64_t remote_services = 0;
	// remote_ip is the IP you are connecting to
	uint8_t remote_ip[16] = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x7f, 0x00, 0x00, 0x01 };
	uint16_t remote_port = 8333;
	uint64_t local_services = 0;
	uint8_t local_ip[16] = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x7f, 0x00, 0x00, 0x01 };
	uint16_t local_port = 8333;
	uint64_t nonce = 0;
	uint8_t user_agent[1] = { 0x00 };
	uint32_t last_block = 0;
};
#pragma pack(pop)

#pragma pack(push, 1)
struct BlockMessage {
	uint8_t magic_bytes[4] = { 0xf9, 0xbe, 0xb4, 0xd9 };
	uint8_t command[12] = { 0x62, 0x6C, 0x6F, 0x63, 0x6B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
	uint32_t size = sizeof(Block);
	uint8_t checksum[4];
	Block block;
};
#pragma pack(pop)